<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        caption="msg://internalEmailTemplateEdit.caption"
        focusComponent="templateNameField"
        messagesPack="com.company.itpearls.web.screens.internalemailtemplate">
    <data>
        <instance id="internalEmailTemplateDc"
                  class="com.company.itpearls.entity.InternalEmailTemplate">
            <view extends="_local">
                <property name="templateOpenPosition" view="_local"/>
                <property name="templatePosition" view="_local"/>
                <property name="templateAuthor" view="_local"/>
            </view>
            <loader/>
        </instance>
        <collection id="templateOpenPositionsDc" class="com.company.itpearls.entity.OpenPosition" view="_minimal">
            <loader id="templateOpenPositionsDl">
                <query>
                    <![CDATA[select e from itpearls_OpenPosition e]]>
                </query>
            </loader>
        </collection>
        <collection id="templatePositionsDc" class="com.company.itpearls.entity.Position" view="_minimal">
            <loader id="templatePositionsDl">
                <query>
                    <![CDATA[select e from itpearls_Position e]]>
                </query>
            </loader>
        </collection>
        <collection id="templateAuthorsDc" class="com.haulmont.cuba.security.entity.User" view="_minimal">
            <loader id="templateAuthorsDl">
                <query>
                    <![CDATA[select e from sec$User e]]>
                </query>
            </loader>
        </collection>
    </data>
    <dialogMode height="600"
                width="800"/>
    <layout expand="textAreaGroupBox"
            spacing="true">
        <textField id="templateNameField"
                   caption="msg://msgTemplateName"
                   width="50%"
                   dataContainer="internalEmailTemplateDc"
                   property="templateName"/>
        <lookupPickerField id="templateOpenPositionField"
                           caption="msg://msgOpenPosition"
                           width="50%"
                           dataContainer="internalEmailTemplateDc"
                           optionsContainer="templateOpenPositionsDc"
                           property="templateOpenPosition"/>
        <lookupPickerField id="templatePositionField"
                           caption="msg://msgTemplatePosition"
                           dataContainer="internalEmailTemplateDc"
                           width="50%"
                           optionsContainer="templatePositionsDc"
                           property="templatePosition"/>
        <textField id="templateCommentField"
                   caption="msg://msgTemplateComment"
                   dataContainer="internalEmailTemplateDc"
                   width="50%"
                   property="templateComment"/>
        <lookupPickerField id="templateAuthorField"
                           caption="msg://msgTemplateAuthor"
                           dataContainer="internalEmailTemplateDc"
                           width="50%"
                           optionsContainer="templateAuthorsDc"
                           property="templateAuthor"/>
        <groupBox id="textAreaGroupBox"
                  expand="textAreaHBox"
                  spacing="true">
            <textField id="templateSubjField"
                       caption="msg://msgTemplateSubj"
                       dataContainer="internalEmailTemplateDc"
                       width="100%"
                       property="templateSubj"/>
            <hbox id="textAreaHBox"
                  spacing="true" width="100%">
                <richTextArea id="templateTextField"
                              dataContainer="internalEmailTemplateDc"
                              property="templateText"
                              box.expandRatio="8"
                              width="100%"
                              height="100%"/>
                <richTextArea id="commentKeysRichTextArea"
                              box.expandRatio="2"
                              stylename="borderless"
                              width="100%"
                              height="100%"
                              editable="false"/>
            </hbox>
        </groupBox>
        <hbox id="editActions" spacing="true">
            <button id="commitAndCloseBtn" action="windowCommitAndClose"/>
            <button id="closeBtn" action="windowClose"/>
        </hbox>
    </layout>
</window>
