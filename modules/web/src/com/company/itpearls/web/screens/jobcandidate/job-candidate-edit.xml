<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        xmlns:c="http://schemas.haulmont.com/cuba/screen/jpql_condition.xsd"
        caption="msg://editorCaption"
        messagesPack="com.company.itpearls.web.screens.jobcandidate"
        icon="USER">
    <data>
        <instance id="jobCandidateDc"
                  class="com.company.itpearls.entity.JobCandidate">
            <view extends="_local">
                <property name="candidateCv" view="_local">
                    <property name="candidate" view="_local">
                        <property name="personPosition" view="_local"/>
                    </property>
                    <property name="resumePosition" view="_local">
                    </property>
                    <property name="toVacancy" view="_local">
                        <property name="grade" view="_local"/>
                        <property name="positionType" view="_local"/>
                        <property name="projectName" view="_local">
                            <property name="projectLogo" view="_local"/>
                            <property name="projectDepartment" view="_local">
                                <property name="companyName" view="_local"/>
                            </property>
                        </property>
                        <property name="owner" view="_local"/>
                    </property>
                    <property name="someFiles" view="_local">
                        <property name="fileOwner" view="_local"/>
                        <property name="fileDescriptor" view="_local"/>
                        <property name="fileType" view="_local"/>
                        <property name="candidateCV" view="_local"/>
                    </property>
                    <property name="fileImageFace" view="_local"/>
                </property>
                <property name="iteractionList" view="_local">
                    <property name="candidate" view="_local"/>
                    <property name="vacancy" view="_local">
                        <property name="owner" view="_local"/>
                        <property name="positionType" view="_local"/>
                        <property name="projectName" view="_local">
                            <property name="projectLogo" view="_local"/>
                            <property name="projectDepartment" view="_local"/>
                        </property>
                    </property>
                    <property name="iteractionType" view="_local"/>
                    <property name="recrutier" view="_local">
                        <property name="fileImageFace"/>
                    </property>
                </property>
                <property name="socialNetwork" view="_local">
                    <property name="socialNetworkURL" view="_local">
                        <property name="logo" view="_local"/>
                    </property>
                </property>
                <property name="laborAgreement" view="_local"/>
                <property name="cityOfResidence" view="_local"/>
                <property name="currentCompany" view="_local">
                    <property name="companyGroup" view="_local"/>
                </property>
                <property name="fileImageFace" view="_local"/>
                <property name="positionList" view="_local">
                    <property name="positionList" view="_local"/>
                </property>
                <property name="personPosition" view="_local"/>
            </view>
            <loader id="jobCandidateDl"
                    softDeletion="true"
                    dynamicAttributes="false"/>
            <collection id="jobCandidateCandidateCvsDc"
                        property="candidateCv"/>
            <collection id="jobCandidateSocialNetworksDc"
                        property="socialNetwork"/>
            <collection id="jobCandidateIteractionDc"
                        property="iteractionList"/>
            <collection id="jobCandidateLaborAgreementDc"
                        property="laborAgreement"/>
        </instance>
        <keyValueCollection id="lastProjectDc">
            <loader id="lastProjectDl">
                <query>
                    <![CDATA[select e.vacancy, max(e.dateIteraction)
                    from itpearls_IteractionList e
                    where not e.vacancy.vacansyName like 'Default'
                    group by e.vacancy
                    order by max(e.dateIteraction) desc]]>
                    <condition>
                        <and>
                            <c:jpql>
                                <c:where>e.candidate = :candidate</c:where>
                            </c:jpql>
                        </and>
                    </condition>
                </query>
            </loader>
            <properties>
                <property name="vacancy"
                          class="com.company.itpearls.entity.OpenPosition"/>
                <property datatype="date"
                          name="max"/>
            </properties>
        </keyValueCollection>
        <collection id="openPositionDc"
                    class="com.company.itpearls.entity.OpenPosition">
            <view extends="_local">
                <property name="positionType" view="_local"/>
                <property name="projectName" view="_local">
                    <property name="projectLogo" view="_local"/>
                </property>
            </view>
            <loader id="openPositionDl"
                    cacheable="true">
                <query>
                    <![CDATA[select e from itpearls_OpenPosition e
                    where e.openClose = false or e.openClose is null
                    order by e.vacansyName]]>
                </query>
            </loader>
        </collection>
        <collection id="suggestOpenPositionDc"
                    class="com.company.itpearls.entity.OpenPosition">
            <view extends="_local"/>
            <loader id="suggestOpenPositionDl"
                    cacheable="true">
                <query>
                    <![CDATA[select e from itpearls_OpenPosition e
                    where e.openClose = false or e.openClose is null
                    order by e.vacansyName]]>
                    <condition>
                        <or>
                            <c:jpql>
                                <c:where>e.positionType = :positionType</c:where>
                            </c:jpql>
                            <c:jpql>
                                <c:where>e.positionType in :positionTypes</c:where>
                            </c:jpql>
                        </or>
                    </condition>
                </query>
            </loader>
        </collection>
        <collection id="personPositionsDc"
                    class="com.company.itpearls.entity.Position">
            <view extends="position-view">
            </view>
            <loader id="personPositionsLc" cacheable="true">
                <query>
                    <![CDATA[select e from itpearls_Position e
                            where e.positionRuName not like '%(не использовать)%'
                            order by e.positionRuName]]>
                </query>
            </loader>
        </collection>
        <collection id="currentCompaniesDc"
                    class="com.company.itpearls.entity.Company">
            <view extends="company-view"/>
            <loader id="currentCompaniesLc" cacheable="true">
                <query><![CDATA[select e from itpearls_Company e order by e.comanyName]]></query>
            </loader>
        </collection>
        <collection id="citiesDc" class="com.company.itpearls.entity.City">
            <view extends="city-view"/>
            <loader id="citiesDl" cacheable="true">
                <query>
                    <![CDATA[select e from itpearls_City e order by e.cityRuName]]>
                </query>
            </loader>
        </collection>
        <collection id="interactionCommentDc"
                    class="com.company.itpearls.entity.IteractionList">
            <view extends="_local"/>
            <loader id="interactionCommentDl" cacheable="true">
                <query>
                    <![CDATA[select e
                    from itpearls_IteractionList e
                    where e.comment is not null and e.comment not like ''
                    order by e.deteIteraction desc]]>
                    <condition>
                        <and>
                            <c:jpql>
                                <c:where>e.candidate = :candidate</c:where>
                            </c:jpql>
                        </and>
                    </condition>
                </query>
            </loader>
        </collection>
    </data>
    <dialogMode height="750"
                width="1200"/>
    <layout expand="tabSheetSocialNetworks"
            spacing="true"
            width="100%"
            height="100%">
        <groupBox caption="msg://msgOptions"
                  collapsable="true"
                  spacing="true"
                  stylename="light">
            <textField id="fullNameTextField"
                       visible="false"
                       dataContainer="jobCandidateDc"
                       property="fullName"/>
            <checkBox id="blockCandidateCheckBox"
                      dataContainer="jobCandidateDc"
                      property="blockCandidate"
                      visible="false"/>
            <grid spacing="true" height="45px">
                <columns count="12"/>
                <rows>
                    <row>
                        <label id="iteractionListLabelCandidate"
                               stylename="h3"
                               align="MIDDLE_LEFT"/>
                        <label stylename="h2"
                               align="MIDDLE_LEFT"
                               value="|"/>
                        <label stylename="h3"
                               value="msg://msgRating"
                               align="MIDDLE_LEFT"/>
                        <label id="candidateRatingLabel"
                               stylename="h3"
                               align="MIDDLE_LEFT"/>
                        <label stylename="h2"
                               align="MIDDLE_LEFT"
                               value="|"/>
                        <label stylename="h3"
                               align="MIDDLE_LEFT"
                               dataContainer="jobCandidateDc"
                               property="personPosition"/>
                        <label stylename="h2"
                               align="MIDDLE_LEFT"
                               value="|"/>
                        <label id="cityOfCandidate"
                               stylename="h3"
                               align="MIDDLE_LEFT"
                               dataContainer="jobCandidateDc"
                               property="cityOfResidence"/>
                        <label stylename="h2"
                               align="MIDDLE_LEFT"
                               value="|"/>
                        <label id="labelCV"
                               align="MIDDLE_CENTER"
                               stylename="h3"/>
                        <label stylename="h2"
                               align="MIDDLE_LEFT"
                               value="|"/>
                        <label id="labelQualityPercent"
                               align="MIDDLE_CENTER"
                               stylename="h3"/>
                    </row>
                </rows>
            </grid>
            <grid spacing="true">
                <columns count="5"/>
                <rows>
                    <row>
                        <label id="emailLabel"
                               description="msg://msgEmail"
                               stylename="h4"
                               align="MIDDLE_LEFT"/>
                        <label id="phoneLabel"
                               description="msg://msgPhone"
                               stylename="h4"
                               align="MIDDLE_LEFT"
                               dataContainer="jobCandidateDc"
                               property="phone"/>
                        <label id="mobilePhoneLabel"
                               description="msg://msgMobilePhone"
                               stylename="h4"/>
                        <label id="skypuLabel"
                               description="msg://msgSkype"
                               stylename="h4"
                               align="MIDDLE_LEFT"/>
                        <label id="telegramLabel"
                               description="msg://msgTelegram"
                               stylename="h4"
                               align="MIDDLE_LEFT"/>
                    </row>
                </rows>
            </grid>
        </groupBox>
        <tabSheet id="tabSheetSocialNetworks"
                  stylename="framed">
            <tab id="jobCandidateCard"
                 caption="msg://msgJobCard"
                 margin="true,true,true,true"
                 spacing="true"
                 expand="jobCandidateCardScrollBox"
                 icon="ID_CARD">
                <scrollBox id="jobCandidateCardScrollBox"
                           width="100%"
                           height="AUTO"
                           orientation="vertical">
                    <vbox id="jobCandidateCardVBox"
                          expand="lastProjectsScrollBox"
                          width="100%"
                          height="100%">
                        <hbox id="cardBox"
                              spacing="true"
                              width="100%"
                              expand="cardTextBox">
                            <groupBox id="cardTextBox"
                                      spacing="true"
                                      stylename="light"
                                      collapsable="false"
                                      align="TOP_LEFT"
                                      caption="msg://msgContactsOfCandidate"
                                      height="100%">
                                <hbox spacing="false">
                                    <label id="jobTitleTitle"
                                           value="msg://msgFIO"
                                           stylename="h3"
                                           htmlEnabled="true"/>
                                    <label id="fullNameField"
                                           stylename="h3"/>
                                    <label value=", " stylename="h3" htmlEnabled="true"/>
                                    <label id="currentCompanyLabel"
                                           dataContainer="jobCandidateDc"
                                           property="currentCompany"
                                           stylename="h3"/>
                                    <label value=", "
                                           stylename="h3"
                                           htmlEnabled="true"/>
                                    <label dataContainer="jobCandidateDc"
                                           property="cityOfResidence"
                                           stylename="h3"
                                           htmlEnabled="true"/>
                                </hbox>
                                <hbox spacing="true">
                                    <label id="personPositionTitle"
                                           value="msg://msgPosition"
                                           stylename="h4"
                                           htmlEnabled="true"/>
                                    <label dataContainer="jobCandidateDc"
                                           property="personPosition"
                                           stylename="h4"/>
                                </hbox>
                                <hbox spacing="true">
                                    <label id="emailTitle"
                                           value="msg://msgEmail"
                                           align="MIDDLE_LEFT"
                                           stylename="h4"
                                           htmlEnabled="true"/>
                                    <linkButton id="emailLinkButton"
                                                align="MIDDLE_LEFT"
                                                description="msg://msgEmail"/>
                                </hbox>
                                <hbox spacing="true">
                                    <label id="phoneTitle"
                                           value="msg://msgPhone"
                                           stylename="h4"
                                           htmlEnabled="true"/>
                                    <label dataContainer="jobCandidateDc"
                                           property="phone"
                                           stylename="h4"/>
                                </hbox>
                                <hbox spacing="true">
                                    <label id="mobilePhoneTitle"
                                           value="msg://msgMobilePhone"
                                           stylename="h4"
                                           htmlEnabled="true"/>
                                    <label dataContainer="jobCandidateDc"
                                           property="mobilePhone"
                                           stylename="h4"/>
                                </hbox>
                                <hbox spacing="true">
                                    <label id="telegramTitle"
                                           value="msg://msgTelegram"
                                           stylename="h4"
                                           align="MIDDLE_LEFT"
                                           htmlEnabled="true"/>
                                    <linkButton id="telegrammLinkButton"
                                                align="MIDDLE_LEFT"
                                                description="msg://msgTelegram"/>
                                </hbox>
                                <hbox spacing="true">
                                    <label id="telegramGroupTitle"
                                           value="msg://msgTelegramGroup"
                                           stylename="h4"
                                           align="MIDDLE_LEFT"
                                           htmlEnabled="true"/>
                                    <linkButton id="telegrammGroupLinkButton"
                                                align="MIDDLE_LEFT"
                                                description="msg://msgTelegramGroup"/>
                                </hbox>
                                <hbox spacing="true">
                                    <label id="skypeTitle"
                                           value="msg://msgSkype"
                                           align="MIDDLE_LEFT"
                                           stylename="h4"
                                           htmlEnabled="true"/>
                                    <linkButton id="skypeLinkButton"
                                                align="MIDDLE_LEFT"
                                                description="msg://msgSkype"/>
                                </hbox>
                            </groupBox>
                            <vbox id="dropZone"
                                  spacing="true"
                                  width="220px"
                                  height="292px"
                                  align="BOTTOM_RIGHT"
                                  expand="picVBox"
                                  stylename="dropzone-container">
                                <vbox id="picVBox">
                                    <image id="candidatePic"
                                           dataContainer="jobCandidateDc"
                                           property="fileImageFace"
                                           width="100%"
                                           visible="true"
                                           align="TOP_RIGHT"
                                           stylename="widget-border"
                                           scaleMode="FILL"/>
                                    <image id="candidateDefaultPic"
                                           width="100%"
                                           visible="false"
                                           align="TOP_RIGHT"
                                           stylename="widget-border"
                                           scaleMode="FILL">
                                        <theme path="icons/no-programmer.jpeg"/>
                                    </image>
                                </vbox>
                                <upload id="fileImageFaceUpload"
                                        fileStoragePutMode="IMMEDIATE"
                                        dataContainer="jobCandidateDc"
                                        align="BOTTOM_CENTER"
                                        showFileName="false"
                                        dropZone="dropZone"
                                        showClearButton="true"
                                        property="fileImageFace"/>
                                <button id="openPositionMasterBrowseButton"
                                        caption="msg://msgOpenPositionMasterBrowse"
                                        description="msg://msgOpenPositiionMasterBrowseDescription"
                                        invoke="openPositionMasterBrowseStart"
                                        width="100%"
                                        height="AUTO"/>
                            </vbox>
                        </hbox>
                        <hbox id="skillBox"
                              width="100%"
                              height="AUTO"/>
                        <scrollBox id="lastProjectsScrollBox" orientation="vertical">
                            <groupBox id="lastProjects"
                                      caption="msg://msgCandidateProjects"
                                      collapsable="true"
                                      width="100%"
                                      stylename="light"
                                      expand="dictionatysTavlesHBox">
                                <grid id="dictionatysTavlesHBox"
                                      spacing="true"
                                      width="100%">
                                    <columns count="6"/>
                                    <rows>
                                        <row>
                                            <table id="lastProjectTable"
                                                   width="100%"
                                                   height="100%"
                                                   stylename="no-horizontal-lines"
                                                   editable="false"
                                                   contextMenuEnabled="false"
                                                   colspan="4"
                                                   dataContainer="lastProjectDc">
                                                <columns>
                                                    <column id="number"
                                                            width="30px"
                                                            caption="№"
                                                            generator="lastIteractionCount"/>
                                                    <column id="vacancy"
                                                            width="300px"
                                                            maxTextLength="40"
                                                            caption="msg://msgVacancy"/>
                                                    <column id="max"
                                                            width="70px"
                                                            caption="msg://msgDate"/>
                                                    <column id="lastInteraction"
                                                            width="200px"
                                                            maxTextLength="40"
                                                            caption="msg://msgLastInteraction"
                                                            generator="lastInteractionGeneratorColumn"/>
                                                    <column id="researcher"
                                                            width="100px"
                                                            caption="msg://msgResearcher"
                                                            generator="whoIsResearcherGeneratorColumn"/>
                                                    <column id="recruter"
                                                            width="100px"
                                                            caption="msg://msgRecruter"
                                                            generator="whoIsRecruterGeneratorColumn"/>
                                                    <column id="idViewIteractionsButton"
                                                            width="100px"
                                                            caption="msg://msgInteractionsView"
                                                            generator="addInteractionsViewButton"/>
                                                </columns>
                                            </table>
                                            <table id="suggestVacancyTable"
                                                   contextMenuEnabled="false"
                                                   width="100%"
                                                   colspan="2"
                                                   height="100%"
                                                   editable="false"
                                                   stylename="no-horizontal-lines"
                                                   dataContainer="suggestOpenPositionDc">
                                                <columns>
                                                    <column id="notSendedIconColumn"
                                                            caption="msg://msgStatus"
                                                            width="20px"/>
                                                    <column id="vacansyName"
                                                            captionAsHtml="true"
                                                            maxTextLength="60"
                                                            caption="msg://msgSuggestVacansies"/>
                                                </columns>
                                                <rows/>
                                            </table>
                                        </row>
                                    </rows>
                                </grid>
                            </groupBox>
                        </scrollBox>
                    </vbox>
                </scrollBox>
            </tab>
            <tab id="tabCandidate"
                 caption="msg://candidate"
                 margin="true,true,true,true"
                 icon="BOMB"
                 spacing="true">
                <hbox id="cardCandidateBox"
                      spacing="true"
                      width="100%"
                      expand="tabCabdidateGrid">
                    <grid id="tabCabdidateGrid"
                          height="100%"
                          spacing="true">
                        <columns count="2"/>
                        <rows>
                            <row>
                                <suggestionField id="firstNameField"
                                                 dataContainer="jobCandidateDc"
                                                 property="firstName"
                                                 width="100%"
                                                 caption="msg://msgFirstName"
                                                 rowspan="1"
                                                 colspan="1"
                                                 minSearchStringLength="1"
                                                 required="true"
                                                 editable="true"
                                                 inputPrompt="msg://msgPressEnter">
                                    <query entityClass="com.company.itpearls.entity.JobCandidate"
                                           escapeValueForLike="false"
                                           view="_local"
                                           searchStringFormat="%$searchString%">
                                        select e.firstName from itpearls_JobCandidate e where lower(e.firstName) like
                                        lower(:searchString) escape '\'
                                    </query>
                                </suggestionField>
                                <lookupPickerField id="currentCompanyField"
                                                   optionsContainer="currentCompaniesDc"
                                                   dataContainer="jobCandidateDc"
                                                   nullOptionVisible="false"
                                                   property="currentCompany"
                                                   width="100%"
                                                   caption="msg://msgCorrentCompany"
                                                   required="true">
                                    <actions>
                                        <action id="lookup" type="picker_lookup"/>
                                        <action id="open" type="picker_open" icon="EDIT_ACTION"/>
                                    </actions>
                                </lookupPickerField>
                            </row>
                            <row>
                                <suggestionField id="middleNameField"
                                                 dataContainer="jobCandidateDc"
                                                 property="middleName"
                                                 width="100%"
                                                 minSearchStringLength="1"
                                                 caption="msg://msgMiddleName"
                                                 editable="true"
                                                 inputPrompt="msg://msgPressEnter">
                                    <query entityClass="com.company.itpearls.entity.JobCandidate"
                                           searchStringFormat="%$searchString%"
                                           view="_minimal"
                                           escapeValueForLike="true">
                                        select e from itpearls_JobCandidate e where lower(e.middleName) like
                                        lower(:searchString) escape '\'
                                    </query>
                                </suggestionField>
                                <hbox expand="personPositionField"
                                      spacing="true"
                                      align="MIDDLE_LEFT"
                                      width="100%">
                                    <lookupPickerField id="personPositionField"
                                                       optionsContainer="personPositionsDc"
                                                       dataContainer="jobCandidateDc"
                                                       nullOptionVisible="false"
                                                       property="personPosition"
                                                       align="BOTTOM_RIGHT"
                                                       caption="msg://msgPersonPosition"
                                                       required="true">
                                        <actions>
                                            <action id="lookup" type="picker_lookup"/>
                                            <action id="open" type="picker_open" icon="EDIT_ACTION"/>
                                        </actions>
                                    </lookupPickerField>
                                    <button id="addPositions"
                                            caption="msg://msgSetPositions"
                                            width="AUTO"
                                            enable="true"
                                            align="BOTTOM_RIGHT"
                                            description="msg://msgSetPositions"
                                            invoke="addPositionList"/>
                                </hbox>
                            </row>
                            <row>
                                <hbox/>
                                <hbox align="MIDDLE_RIGHT"
                                      spacing="true"
                                      width="100%"
                                      expand="positionsLabel">
                                    <label id="positionsLabel"
                                           stylename="h4"
                                           align="TOP_RIGHT"/>
                                </hbox>
                            </row>
                            <row>
                                <suggestionField id="secondNameField"
                                                 dataContainer="jobCandidateDc"
                                                 property="secondName"
                                                 width="100%"
                                                 minSearchStringLength="1"
                                                 caption="msg://msgSecondName"
                                                 editable="true"
                                                 inputPrompt="msg://msgPressEnter">
                                    <query entityClass="com.company.itpearls.entity.JobCandidate"
                                           escapeValueForLike="true"
                                           searchStringFormat="%$searchString%">
                                        select e from itpearls_JobCandidate e where lower(e.secondName) like
                                        lower(:searchString) escape '\'
                                    </query>
                                </suggestionField>
                                <lookupPickerField id="jobCityCandidateField"
                                                   dataContainer="jobCandidateDc"
                                                   nullOptionVisible="false"
                                                   width="100%"
                                                   caption="msg://msgCityOfResidence"
                                                   optionsContainer="citiesDc"
                                                   property="cityOfResidence"
                                                   required="true">
                                    <actions>
                                        <action id="lookup" type="picker_lookup"/>
                                    </actions>
                                </lookupPickerField>
                            </row>
                            <row>
                                <dateField id="birdhDateField"
                                           dataContainer="jobCandidateDc" property="birdhDate"
                                           width="100%"
                                           caption="msg://msgBirthDate"/>
                            </row>
                        </rows>
                    </grid>
                </hbox>
            </tab>
            <tab id="tabContactInfo"
                 caption="msg://msgTabContactInfo"
                 margin="true,true,true,true"
                 expand="socialNetworkTableHbox"
                 icon="font-icon:USER"
                 spacing="true">
                <hbox id="contactInfoGroupBox"
                      width="100%"
                      height="AUTO"
                      spacing="true">
                    <vbox spacing="false"
                          width="100%"
                          height="100%"
                          margin="true,true,true,true"
                          box.expandRatio="12">
                        <grid id="contactInfoGrid"
                              spacing="true"
                              height="AUTO"
                              width="100%">
                            <columns count="2"/>
                            <rows>
                                <row>
                                    <textField id="emailField"
                                               dataContainer="jobCandidateDc"
                                               property="email"
                                               width="100%"
                                               caption="msg://msgEmail"
                                               required="true">
                                    </textField>
                                    <textField id="telegramNameField"
                                               dataContainer="jobCandidateDc"
                                               property="telegramName"
                                               required="true"
                                               width="100%"
                                               caption="msg://msgTelegramAccount"/>
                                </row>
                                <row>
                                    <textField id="phoneField"
                                               dataContainer="jobCandidateDc"
                                               property="phone"
                                               width="100%"
                                               caption="msg://msgPhone"
                                               required="true"/>
                                    <textField id="telegramGroupField"
                                               dataContainer="jobCandidateDc"
                                               property="telegramGroup"
                                               required="true"
                                               width="100%" caption="msg://msgTelegramGrouep"/>
                                </row>
                                <row>
                                    <textField id="mobilePhoneField"
                                               dataContainer="jobCandidateDc"
                                               property="mobilePhone"
                                               width="100%"
                                               caption="msg://msgMobilePhone"
                                               required="true"/>
                                    <textField id="wiberNameField"
                                               dataContainer="jobCandidateDc"
                                               property="wiberName"
                                               required="true"
                                               width="100%"
                                               caption="msg://msgViberAccount"/>
                                </row>
                                <row>
                                    <textField id="skypeNameField"
                                               dataContainer="jobCandidateDc"
                                               property="skypeName"
                                               width="100%"
                                               caption="msg://msgSkypeAccaunt"
                                               required="true"/>
                                    <textField id="whatsupNameField"
                                               dataContainer="jobCandidateDc"
                                               property="whatsupName"
                                               width="100%"
                                               required="true"
                                               caption="msg://msgWhatsAppAccount"/>
                                </row>
                            </rows>
                        </grid>
                    </vbox>
                    <vbox spacing="false"
                          width="100%"
                          height="100%"
                          expand="priorityCommunicationMethodRadioButton"
                          margin="true,true,true,true"
                          box.expandRatio="2">
                        <radioButtonGroup id="priorityCommunicationMethodRadioButton"
                                          caption="msg://msgPriorityCommunicationMethod"
                                          width="100%"
                                          required="true"
                                          dataContainer="jobCandidateDc"
                                          property="priorityContact"/>
                    </vbox>
                </hbox>
                <hbox id="socialNetworkTableHbox"
                      width="100%"
                      height="AUTO"
                      spacing="true"
                      stylename="borderless"
                      margin="false,false,false,false"
                      expand="socialNetworkTable">
                    <dataGrid id="socialNetworkTable"
                              height="100%"
                              width="100%"
                              editorEnabled="true"
                              dataContainer="jobCandidateSocialNetworksDc">
                        <columns>
                            <column id="socialNetworkLogoColumn"
                                    width="50px"
                                    caption="">
                                <componentRenderer/>
                            </column>
                            <column id="networkName"
                                    editable="false"
                                    property="socialNetworkURL.socialNetwork"
                                    maximumWidth="200px"/>
                            <column id="networkURLS"
                                    editable="true"
                                    property="networkURLS"/>
                            <column id="linkToWeb"
                                    caption="msg://msgLinkURL"
                                    maximumWidth="150px">
                                <componentRenderer/>
                            </column> <!-- <componentRenderer/> -->
                        </columns>
                    </dataGrid>
                    <vbox spacing="true"
                          width="AUTO"
                          height="AUTO">
                        <button id="addSocialNetworkListsButton"
                                visible="false"
                                enable="false"
                                width="100%"
                                caption="msg://msgAddSocialNetworks"
                                description="msg://msgAddSocialNetworksDesc"
                                invoke="addSocialNetworksListsInvoke"/>
                        <button id="addMissingSocialNetworkListsButton"
                                width="100%"
                                enable="true"
                                caption="msg://msgAddMissingSocialNetrorkButton"
                                description="msg://msgAddMissingSocialNetrorkButtonDesc"
                                invoke="addMissingSocialNetworksListsInvoke"/>
                        <button id="removeEmptySocialNetworkListsButton"
                                width="100%"
                                enable="true"
                                caption="msg://removeEmptySocialNetworkListsButton"
                                description="msg://removeEmptySocialNetworkListsButtonDesc"
                                invoke="removeEmptySocialNetworkListsButton"/>
                    </vbox>
                </hbox>
            </tab>
            <!--
            <tab id="tabOutstaffing"
                 caption="msg://msgOutstaffing"
                 margin="true,true,true,true"
                 icon="CUBES"
                 expand="outstaffingMainVBox"
                 spacing="true">
                <vbox id="outstaffingMainVBox"
                      height="100%"
                      width="100%"
                      expand="jobCandidateAgreementTable"
                      spacing="true">
                    <radioButtonGroup id="workStatusRadioButton"
                                      width="AUTO"
                                      caption="msg://msgWorkStatus"
                                      dataContainer="jobCandidateDc"
                                      property="workStatus"/>
                    <dataGrid id="jobCandidateAgreementTable"
                              dataContainer="jobCandidateLaborAgreementDc"
                              width="100%"
                              contextMenuEnabled="false"
                              textSelectionEnabled="false"
                              reorderingAllowed="true">
                        <actions>
                            <action id="create" type="create"/>
                            <action type="edit" id="edit"/>
                            <action id="remove" type="remove"/>
                            <action id="refresh" type="refresh"/>
                        </actions>
                        <buttonsPanel>
                            <button action="jobCandidateAgreementTable.create"/>
                            <button action="jobCandidateAgreementTable.edit"/>
                            <button action="jobCandidateAgreementTable.remove"/>
                        </buttonsPanel>
                        <columns>
                        </columns>
                    </dataGrid>
                </vbox>
            </tab>
            -->
            <tab id="tabIteraction"
                 caption="msg://candidateIteration"
                 margin="true,true,true,true"
                 expand="jobCandidateIteractionListTable"
                 icon="LIST"
                 spacing="true">
                <lookupPickerField id="vacancyFilterLookupPickerField"
                                   caption="msg://msgVacancyFiler"
                                   visible="true"
                                   width="AUTO">
                    <actions>
                        <action id="lookup" type="picker_lookup"/>
                        <action id="open" type="picker_open" icon="EDIT_ACTION"/>
                    </actions>
                </lookupPickerField>
                <dataGrid id="jobCandidateIteractionListTable"
                          dataContainer="jobCandidateIteractionDc"
                          width="100%"
                          bodyRowHeight="58px"
                          contextMenuEnabled="false"
                          textSelectionEnabled="false"
                          reorderingAllowed="true"
                          height="350px">
                    <actions>
                        <action id="create" type="create"/>
                        <action type="edit" id="edit"/>
                        <action id="remove" type="remove"/>
                        <action id="refresh" type="refresh"/>
                    </actions>
                    <buttonsPanel>
                        <button action="jobCandidateIteractionListTable.create"/>
                        <popupButton id="frequentInteractionPopupButton"
                                     icon="FILE_TEXT"
                                     enable="false"
                                     caption="msg://msgAddPopularIteraction"/>
                        <button action="jobCandidateIteractionListTable.edit"/>
                        <button id="copyIteractionButton"
                                caption="msg://msgCopy"
                                icon="COPY"/>
                        <button action="jobCandidateIteractionListTable.remove"/>
                        <button id="openPositionProjectDescriptionButton"
                                enable="false"
                                caption="msg://msgOpenPositionDescription"/>
                    </buttonsPanel>
                    <columns>
                        <column id="icon"
                                width="48px"
                                caption=""/>
                        <column id="projectLogoColumn"
                                resizable="true"
                                collapsible="true"
                                collapsed="false"
                                caption="msg://msgProject"
                                width="70px"
                                minimumWidth="70px">
                            <componentRenderer/>
                        </column>
                        <column id="numberIteraction"
                                property="numberIteraction"
                                sort="DESCENDING"
                                width="85px"
                                maximumWidth="100px"
                                sortable="true"/>
                        <column id="rating"
                                minimumWidth="85px"
                                width="85px"
                                maximumWidth="100px"
                                caption="msg://msgRating">
                            <htmlRenderer nullRepresentation="null"/>
                        </column>
                        <column id="vacancy"
                                maximumWidth="400px"
                                property="vacancy"/>
                        <column id="currentOpenCloseColumn"
                                caption="mainMsg://msgCurrentOpenClose"
                                maximumWidth="45px">
                            <iconRenderer/>
                        </column>
                        <column id="iteractionType"
                                maximumWidth="250px"
                                property="iteractionType"/>
                        <column id="commentColumn"
                                maximumWidth="80px"
                                width="60px"
                                caption="msg://msgIsComment">
                            <iconRenderer/>
                        </column>
                        <column id="recrutier"
                                maximumWidth="150px"
                                property="recrutier"/>
                        <column id="dateIteraction"
                                property="dateIteraction"
                                width="80px"
                                caption="msg://msgDate">
                            <formatter format="dd.MM.yyyy"
                                       class="com.haulmont.cuba.gui.components.formatters.DateFormatter"/>
                        </column>
                    </columns>
                    <rowsCount/>
                </dataGrid>
            </tab>
            <tab id="tabResume"
                 caption="msg://msgResume"
                 margin="true,true,true,true"
                 icon="font-icon:FILE_TEXT"
                 expand="tabResumeVbox"
                 spacing="true">
                <vbox id="tabResumeVbox"
                      spacing="true"
                      height="100%"
                      expand="jobCandidateCandidateCvTable">
                    <button id="checkSkillFromJD"
                            caption="msg://msgCheckSkills"
                            align="BOTTOM_LEFT"
                            enable="false"/>
                    <dataGrid id="jobCandidateCandidateCvTable"
                              width="100%"
                              descriptionAsHtml="true"
                              captionAsHtml="true"
                              bodyRowHeight="55px"
                              dataContainer="jobCandidateCandidateCvsDc">
                        <columns>
                            <column id="projectLogoColumn"
                                    resizable="true"
                                    collapsible="true"
                                    collapsed="false"
                                    caption="msg://msgProject"
                                    width="70px"
                                    minimumWidth="70px">
                                <componentRenderer/>
                            </column>
                            <column id="datePost"
                                    width="100px"
                                    maximumWidth="100px"
                                    property="datePost"
                                    caption="msg://msgDatePost"/>
                            <column id="toVacancy"
                                    property="toVacancy"
                                    caption="msg://msgToVacansy">
                            </column>
                            <column id="resumePosition"
                                    collapsible="true"
                                    collapsed="true"
                                    property="resumePosition"
                                    caption="msg://msgToPosition"/>
                            <column id="iconOriginalCVFile"
                                    width="100px"
                                    maximumWidth="100px"
                                    caption="msg://msgOriginalCV">
                                <iconRenderer/>
                            </column> <!--                                <iconRenderer/> -->
                            <column id="iconITPearlsCVFile"
                                    width="100px"
                                    maximumWidth="100px"
                                    caption="msg://msgITPearlsCV">
                                <iconRenderer/>
                            </column> <!--                                <iconRenderer/> -->
                            <column id="letter"
                                    width="100px"
                                    maximumWidth="100px"
                                    caption="msg://msgCoverLetter">
                                <iconRenderer/>
                            </column><!--                                <iconRenderer/> -->
                            <column id="candidateOriginalCVColumn"
                                    width="150px"
                                    caption="msg://msgOriginalCV">
                                <componentRenderer/>
                            </column><!--                                <componentRenderer/> -->
                            <column id="candidateITPearlsCVColumn"
                                    width="150px"
                                    caption="msg://msgITPearlsCV">
                                <componentRenderer/>
                            </column><!--                                <componentRenderer/> -->
                            <column id="createdBy"
                                    property="createdBy"
                                    width="100px"
                                    caption="msg://msgCreatedBy"/>
                        </columns>
                        <actions>
                            <action type="create"
                                    id="create"/>
                            <action id="edit"
                                    type="edit"/>
                            <action id="remove"
                                    type="remove"/>
                        </actions>
                        <buttonsPanel>
                            <button id="addButtonCV"
                                    action="jobCandidateCandidateCvTable.create"/>
                            <button id="copyCVButton"
                                    caption="msg://msgCopy"
                                    icon="COPY"/>
                            <button id="editButtonCV"
                                    action="jobCandidateCandidateCvTable.edit"/>
                            <button id="removeButtonCV"
                                    action="jobCandidateCandidateCvTable.remove"/>
                            <button id="scanContactsFromCVButton"
                                    caption="msg://msgScan"
                                    enable="false"
                                    invoke="scanContactsFromCVs"/>
                        </buttonsPanel>
                    </dataGrid>
                </vbox>
            </tab>
            <tab id="commentsTab"
                 caption="msg://msgComments"
                 margin="true,true,true,true"
                 icon="font-icon:COMMENT"
                 expand="tabCommentsVbox"
                 spacing="true">
                <vbox id="tabCommentsVbox"
                      spacing="true"
                      height="100%"
                      expand="jobCandidateCommentsDataGrid">
                    <dataGrid id="jobCandidateCommentsDataGrid"
                              dataContainer="interactionCommentDc"
                              bodyRowHeight="130px"
                              headerVisible="false"
                              reorderingAllowed="false"
                              textSelectionEnabled="false"
                              selectionMode="NONE"
                              stylename="no-horizontal-lines no-stripes no-vertical-lines borderless"
                              sortable="false"
                              width="100%"
                              height="100%">
                        <columns>
                            <column id="commentDialog"
                                    sortable="false">
                                <componentRenderer/>
                            </column>
                            <column id="dateIteraction"
                                    sortable="true"
                                    sort="DESCENDING"
                                    width="80px"
                                    collapsed="true"
                                    property="dateIteraction"/>
                            <column id="recrutier"
                                    collapsed="true"
                                    width="250px"
                                    property="recrutier"/>
                            <column id="comment"
                                    collapsed="true"
                                    sortable="false"
                                    property="comment"/>
                        </columns>
                    </dataGrid>
                    <groupBox stylename="well"
                              spacing="true"
                              width="100%">
                        <textField id="chatMessageTextField"
                                   stylename="large"
                                   width="100%"/>
                        <hbox width="100%" expand="vacancyPopupPickerField" spacing="true">
                            <lookupPickerField id="vacancyPopupPickerField"
                                               align="MIDDLE_LEFT"
                                               stylename="large"
                                               optionsContainer="openPositionDc"
                                               width="100%"/>
                            <button id="sendCommentButton"
                                    caption="msg://msgSendComment"
                                    stylename="large"
                                    icon="COMMENTING"
                                    width="AUTO"
                                    enable="false"
                                    align="MIDDLE_RIGHT"
                                    invoke="sendCommentButtonInvoke"/>
                        </hbox>
                    </groupBox>
                </vbox>
            </tab>
        </tabSheet>
        <hbox id="editActions"
              spacing="true"
              width="100%"
              align="BOTTOM_RIGHT"
              expand="createdByLabel">
            <hbox id="createdByLabel"
                  spacing="true"
                  expand="createdUpdatedLabel">
                <label id="createdUpdatedLabel"
                       align="BOTTOM_LEFT"
                       stylename="small"/>
            </hbox>
            <hbox id="buttonCancelOk" spacing="true">
                <button id="blockCandidateButton"
                        caption="msg://msgBlockCandidate"
                        invoke="blockCandidateButton"
                        icon="WINDOW_CLOSE_O"
                        align="BOTTOM_RIGHT"/>
                <button id="buttonSubscribe"
                        caption="msg://msgSubscribe"
                        invoke="onButtonSubscribeClick"
                        icon="BELL"
                        visible="false"
                        align="BOTTOM_RIGHT"/>
                <button id="windowCommitAndCloseButton"
                        action="windowCommitAndClose"
                        align="BOTTOM_RIGHT"/>
                <button action="windowClose"
                        align="BOTTOM_RIGHT"/>
            </hbox>
        </hbox>
    </layout>
</window>
