<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        xmlns:c="http://schemas.haulmont.com/cuba/screen/jpql_condition.xsd"
        caption="msg://editorCaption"
        focusComponent="form"
        messagesPack="com.company.itpearls.web.screens.jobcandidate" icon="ADDRESS_BOOK_O">
    <data>
        <instance id="jobCandidateDc"
                  class="com.company.itpearls.entity.JobCandidate"
                  view="jobCandidate-view">
            <loader/>
            <collection id="jobCandidateIteractionListsDc" property="iteractionList"/>
            <collection id="jobCandidateJobHistoriesDc" property="jobHistory"/>
            <collection id="jobCandidateCandidateCvsDc" property="candidateCv"/>
            <collection id="jobCandidateSocialNetworksDc" property="socialNetwork"/>
            <collection id="jobCandidateSkillsesDc" property="skills"/>
        </instance>
        <collection id="personPositionsDc" class="com.company.itpearls.entity.Position" view="_minimal">
            <loader id="personPositionsLc">
                <query><![CDATA[select e from itpearls_Position e
order by e.positionRuName]]></query>
            </loader>
        </collection>
        <collection id="currentCompaniesDc" class="com.company.itpearls.entity.Company" view="_minimal">
            <loader id="currentCompaniesLc">
                <query><![CDATA[select e from itpearls_Company e
order by e.comanyName]]></query>
            </loader>
        </collection>
        <collection id="positionCountriesDc" class="com.company.itpearls.entity.Country" view="_minimal">
            <loader id="positionCountriesLc">
                <query><![CDATA[select e from itpearls_Country e
order by e.countryRuName]]></query>
            </loader>
        </collection>
        <collection id="citiesDc" class="com.company.itpearls.entity.City" view="city-view">
            <loader id="citiesDl">
                <query>
                    <![CDATA[select e from itpearls_City e
order by e.cityRuName]]>
                </query>
            </loader>
        </collection>
        <collection id="iteractionListsDc" class="com.company.itpearls.entity.IteractionList"
                    view="iteractionList-job-candidate">
            <loader id="iteractionListsDl">
                <query>
                    <![CDATA[select e from itpearls_IteractionList e order by e.numberIteraction desc]]>
                    <condition>
                        <c:jpql>
                            <c:where>e.candidate.id = :candidate</c:where>
                        </c:jpql>
                    </condition>
                </query>
            </loader>
        </collection>
        <collection id="socialNetworkURLsesDc" class="com.company.itpearls.entity.SocialNetworkURLs"
                    view="socialNetworkURLs-view">
            <loader id="socialNetworkURLsesDl">
                <query>
                    <![CDATA[select e from itpearls_SocialNetworkURLs e ]]>
                    <condition>
                        <c:jpql>
                            <c:where>e.jobCandidate.id = :candidate</c:where>
                        </c:jpql>
                    </condition>
                </query>
            </loader>
        </collection>
        <collection id="jobHistoriesDc" class="com.company.itpearls.entity.JobHistory" view="jobHistory-view">
            <loader id="jobHistoriesDl">
                <query>
                    <![CDATA[select e from itpearls_JobHistory e ]]>
                    <condition>
                        <c:jpql>
                            <c:where>e.candidate.fullName = :candidate</c:where>
                        </c:jpql>
                    </condition>
                </query>
            </loader>
        </collection>
    </data>
    <dialogMode height="600"
                width="800"/>
<!--    <tabSheet/>  -->
    <layout expand="editActions" spacing="true">
        <groupBox spacing="true">
            <grid spacing="true">
                <columns count="4"/>
                <rows>
                    <row>
                        <label id="iteractionListLabelCandidate" stylename="h2"
                               align="MIDDLE_LEFT" dataContainer="jobCandidateDc" property="fullName"/>
                        <label id="labelCV" align="MIDDLE_CENTER" stylename="h3"/>
                        <label id="labelLastRecrutier" align="MIDDLE_CENTER" stylename="h3"/>
                        <label id="labelQualityPercent" align="MIDDLE_CENTER" stylename="h3"/>
                    </row>
                </rows>
            </grid>
        </groupBox>
        <tabSheet id="tabSheetSocialNetworks" description="mainMsg://msgSocialNetworks">
            <tab id="tabCandidate" caption="msg://candidate" margin="true,false,false,false" spacing="true">
                <groupBox spacing="true">
                    <grid spacing="true" width="100%">
                        <columns count="2"/>
                        <rows>
                            <row>
                                <textField id="firstNameField" dataContainer="jobCandidateDc" property="firstName" width="100%"
                                           caption="msg://msgFirstName" rowspan="1" colspan="1" required="true"/>
                                <lookupPickerField id="currentCompanyField" optionsContainer="currentCompaniesDc"
                                                   dataContainer="jobCandidateDc" property="currentCompany" width="100%"
                                                   caption="msg://msgCorrentCompany" required="true">
                                    <actions>
                                        <action id="lookup" type="picker_lookup"/>
                                    </actions>
                                </lookupPickerField>
                            </row>
                            <row>
                                <textField id="middleNameField" dataContainer="jobCandidateDc" property="middleName" width="100%"
                                           caption="msg://msgMiddleName"/>
                                <lookupPickerField id="personPositionField" optionsContainer="personPositionsDc"
                                                   dataContainer="jobCandidateDc" property="personPosition" width="100%"
                                                   caption="msg://msgPersonPosition" required="true">
                                    <actions>
                                        <action id="lookup" type="picker_lookup"/>
                                    </actions>
                                </lookupPickerField>
                            </row>
                            <row>
                                <textField id="secondNameField" dataContainer="jobCandidateDc" property="secondName" width="100%"
                                           caption="msg://msgSecondName" required="true"/>
                                <lookupPickerField id="jobCityCandidateField" dataContainer="jobCandidateDc" width="100%"
                                                   caption="msg://msgCityOfResidence" optionsContainer="citiesDc"
                                                   property="cityOfResidence" required="true">
                                    <actions>
                                        <action id="lookup" type="picker_lookup"/>
                                    </actions>
                                </lookupPickerField>
                            </row>
                            <row>
                                <dateField id="birdhDateField" dataContainer="jobCandidateDc" property="birdhDate" width="100%"
                                           caption="msg://msgBirthDate"/>
                                <lookupPickerField id="positionCountryField" optionsContainer="positionCountriesDc"
                                                   dataContainer="jobCandidateDc" property="positionCountry" width="100%"
                                                   caption="msg://msgPositionCountry" required="true">
                                    <actions>
                                        <action id="lookup" type="picker_lookup"/>
                                    </actions>
                                </lookupPickerField>
                            </row>
                        </rows>
                    </grid>
                </groupBox>
            </tab>
            <tab id="tabContactInfo" caption="msg://msgTabContactInfo" margin="true,false,false,false" spacing="true">
                <groupBox spacing="true" caption="msg://msgContactInfo">
                    <grid spacing="true" width="100%">
                        <columns count="2"/>
                        <rows>
                            <row>
                                <textField id="emailField" dataContainer="jobCandidateDc" property="email" width="100%"
                                           caption="msg://msgEmail"/>
                                <textField id="telegramNameField" dataContainer="jobCandidateDc" property="telegramName"
                                           width="100%" caption="msg://msgTelegramAccount"/>
                            </row>
                            <row>
                                <textField id="phoneField" dataContainer="jobCandidateDc" property="phone" width="100%"
                                           caption="msg://msgPhone"/>
                                <textField id="wiberNameField" dataContainer="jobCandidateDc" property="wiberName" width="100%"
                                           caption="msg://msgViberAccount"/>
                            </row>
                            <row>
                                <textField id="skypeNameField" dataContainer="jobCandidateDc" property="skypeName" width="100%"
                                           caption="msg://msgSkypeAccaunt"/>
                                <textField id="whatsupNameField" dataContainer="jobCandidateDc" property="whatsupName" width="100%"
                                           caption="msg://msgWhatsAppAccount"/>
                            </row>
                        </rows>
                    </grid>
                </groupBox>
            </tab>
            <tab id="tabIteraction" caption="msg://candidateIteration" margin="true,false,false,false" spacing="true">
                <groupBox spacing="true">
                    <table id="jobCandidateIteractionListTable" dataContainer="iteractionListsDc"
                           width="100%" height="350px">
                        <columns>
                            <column id="numberIteraction" caption="mainMsg://msgNumberItercation"/>
                            <column id="dateIteraction" caption="mainMsg://msgDate"/>
                            <column id="iteractionType.iterationName" caption="mainMsg://msgItercationType"/>
                            <column id="vacancy.vacansyName"/>
                            <column id="recrutier.name" caption="msg://msgRecrutier"/>
                            <column id="comment"/>
                        </columns>
                        <actions>
                            <action type="create" id="create"/>
                        </actions>
                        <buttonsPanel>
                            <button id="addButton" action="jobCandidateIteractionListTable.create"/>
                        </buttonsPanel>
                    </table>
                </groupBox>
            </tab>
            <tab id="tabSkills" caption="msg://msgSkills" margin="true,false,false,false" spacing="true">
                <groupBox id="groupBoxSpecialistion" spacing="true">
                    <lookupPickerField id="jobCandidateSpecialisationField" dataContainer="jobCandidateDc" property="specialisation"
                                       caption="msg://msgSpecialisation" width="50%">
                        <actions>
                            <action id="lookup" type="picker_lookup"/>
                            <action id="open" type="picker_open"/>
                        </actions>
                    </lookupPickerField>
                    <groupBox spacing="true">
                        <groupTable id="jobCandidateSkillListTable" height="300px" width="100%"
                                    dataContainer="jobCandidateSkillsesDc">
                            <columns>
                                <column id="skillName" caption="mainMsg://msgSkills"/>
                            </columns>
                            <actions>
                                <action id="add" type="add"/>
                                <action id="edit" type="edit"/>
                                <action id="remove" type="remove"/>
                            </actions>
                            <buttonsPanel>
                                <button id="addButton_1" action="jobCandidateSkillListTable.add"/>
                                <button id="editButton_1" action="jobCandidateSkillListTable.edit"/>
                                <button id="removeButton_1" action="jobCandidateSkillListTable.remove"/>
                            </buttonsPanel>
                        </groupTable>
                    </groupBox>
                </groupBox>
            </tab>
            <tab id="tabResume" caption="msg://msgResume" margin="true,false,false,false" spacing="true">
                <groupBox id="groupBoxCV" spacing="true">
                    <table id="jobCandidateCandidateCvTable" height="300px" width="100%" dataContainer="jobCandidateCandidateCvsDc">
                        <columns>
                            <column id="datePost" caption="msg://msgDatePost"/>
                            <column id="resumePosition"/>
                        </columns>
                        <actions>
                            <action type="create" id="create"/>
                            <action id="edit" type="edit"/>
                            <action id="remove" type="remove"/>
                        </actions>
                        <buttonsPanel>
                            <button id="addButtonCV" action="jobCandidateCandidateCvTable.create"/>
                            <button id="editButtonCV" action="jobCandidateCandidateCvTable.edit"/>
                            <button id="removeButtonCV" action="jobCandidateCandidateCvTable.remove"/>
                        </buttonsPanel>
                    </table>
                </groupBox>
            </tab>
            <tab caption="mainMsg://msgSocialNetworks" margin="true,false,false,false" spacing="true" id="tabSocialNetworks"
                 description="mainMsg://msgSocialNetwork">
                <groupBox spacing="true">
                <table id="socialNetworkURLsTable" height="300px" width="100%" dataContainer="socialNetworkURLsesDc">
                    <columns>
                        <column id="socialNetworkURL.socialNetwork"/>
                        <column id="networkURLS"/>
                    </columns>
                    <buttonsPanel>
                        <button id="createButtonSocialNetwork" action="socialNetworkURLsTable.create"/>
                        <button id="editButtonSocialNetwork" action="socialNetworkURLsTable.edit"/>
                        <button id="removeButtonSocialNetwork" action="socialNetworkURLsTable.remove"/>
                    </buttonsPanel>
                    <actions>
                        <action type="create" id="create"/>
                        <action type="edit" id="edit"/>
                        <action type="remove" id="remove"/>
                    </actions>
                </table>
                </groupBox>
            </tab>
            <tab caption="msg://msgJobHistory" margin="true,false,false,false" spacing="true" id="tabJobHistory">
                <groupBox spacing="true">
                    <table id="jobCandidateJobHistoryTable" height="350px" width="100%" dataContainer="jobHistoriesDc">
                        <columns>
                            <column id="dateNewsPosition"/>
                            <column id="currentCompany.comanyName"/>
                            <column id="currentPosition.positionRuName"/>
                        </columns>
                        <buttonsPanel>
                            <button action="jobCandidateJobHistoryTable.create"/>
                            <button action="jobCandidateJobHistoryTable.edit"/>
                            <button action="jobCandidateJobHistoryTable.remove"/>
                        </buttonsPanel>
                        <actions>
                            <action type="create" id="create"/>
                            <action type="edit" id="edit"/>
                            <action type="remove" id="remove"/>
                        </actions>
                    </table>
                </groupBox>
            </tab>
        </tabSheet>
        <form id="form" dataContainer="jobCandidateDc">
            <column width="100%">
                <textField id="jobCandidateFieldCreatedBy" dataContainer="jobCandidateDc" property="createdBy" width="50%"
                           editable="false" enable="false" align="BOTTOM_RIGHT"/>
            </column>
        </form>
        <hbox id="editActions" spacing="true" align="BOTTOM_RIGHT">
            <button id="buttonSubscribe" caption="msg://msgSubscribe" invoke="onButtonSubscribeClick" icon="BELL"/>
            <button id="windowCommitAndCloseButton" action="windowCommitAndClose"/>
            <button action="windowClose"/>
        </hbox>
    </layout>
</window>
