<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        xmlns:c="http://schemas.haulmont.com/cuba/screen/jpql_condition.xsd"
        caption="msg://suggestjobcandidate.caption"
        messagesPack="com.company.itpearls.web.screens.openposition">
    <data readOnly="true">
        <collection id="candidateCVDc"
                    class="com.company.itpearls.entity.CandidateCV">
            <view extends="_local">
                <property name="candidate" view="_local">
                    <property name="fullName"/>
                    <property name="cityOfResidence" view="_minimal"/>
                    <property name="iteractionList" view="_minimal"/>
                </property>
                <property name="resumePosition" view="_minimal"/>
                <property name="toVacancy" view="_minimal">
                    <property name="comment"/>
                </property>
            </view>
            <loader id="candidateCVDl">
                <query>
                    <![CDATA[select e from itpearls_CandidateCV e order by e.candidate.fullName]]>
                    <condition>
                        <and>
                            <c:jpql>
                                <c:where>e.resumePosition = :resumePosition</c:where>
                            </c:jpql>
                            <c:jpql>
                                <c:where>e.candidate.cityOfResidence = :cityOfResidence</c:where>
                            </c:jpql>
                        </and>
                    </condition>
                </query>
            </loader>
        </collection>
        <collection id="personPositionDc"
                    class="com.company.itpearls.entity.Position"
                    view="position-view">
            <loader id="personPositionDl">
                <query>
                    <![CDATA[select e from itpearls_Position e order by e.positionRuName]]>
                </query>
            </loader>
        </collection>
    </data>
    <dialogMode height="600"
                width="1000"
                forceDialog="false"/>
    <layout spacing="true" expand="suitableCheckVBox">
        <vbox id="suitableCheckVBox"
              width="100%"
              align="TOP_CENTER"
              spacing="true"
              expand="gridAndAreaBox"
              height="AUTO">
            <hbox id="suitableCheckHBox"
                  width="AUTO"
                  height="AUTO"
                  spacing="true"
                  align="TOP_CENTER">
                <label id="vacancyNameLabel"
                       align="MIDDLE_LEFT"
                       stylename="h3"/>
                <label id="positionNameLabel"
                       align="MIDDLE_LEFT"
                       stylename="h3"/>
                <label id="cityOfResidenceLabel"
                       align="MIDDLE_LEFT"
                       stylename="h3"/>
            </hbox>
            <hbox spacing="true"
                  expand="jobPositionLookupPickerField"
                  height="AUTO"
                  width="100%">
                <lookupPickerField id="jobPositionLookupPickerField"
                                   align="MIDDLE_LEFT"
                                   width="100%">
                    <actions>
                        <action id="lookup" type="picker_lookup"/>
                        <action id="clear" type="picker_clear"/>
                    </actions>
                </lookupPickerField>
                <button id="rescanButton"
                        caption="msg://msgRescan"
                        description="msg://msgRescanButton"
                        invoke="rescanSuitable"/>
            </hbox>
            <vbox id="gridAndAreaBox"
                  width="100%"
                  spacing="true"
                  expand="candidateCVRichTextArea"
                  height="100%">
                <buttonsPanel>
                    <button id="viewCandidateButton"
                            caption="msg://msgViewCandidate"
                            enable="false"
                            invoke="viewCandidateButton"/>
                    <button id="viewCandidateCVButton"
                            caption="msg://msgViewCandidateCV"
                            enable="false"
                            invoke="viewCandidateCVButton"/>
                    <button id="viewCandidateCheckSkillsButton"
                            caption="msg://msgCheckSkills"
                            enable="false"
                            invoke="viewCandidateCheckSkillsButton"/>
                    <button id="viewIteractionListButton"
                            caption="msg://mshIteractionList"
                            enable="false"
                            invoke="viewIteractionListButton"/>
                </buttonsPanel>
                <dataGrid id="suitableCheckDataGrid"
                          columnResizeMode="ANIMATED"
                          box.expandRatio="1"
                          width="100%"
                          height="100%"
                          dataContainer="candidateCVDc">
                    <columns>
                        <column id="candidate"
                                property="candidate.fullName"
                                sort="ASCENDING"
                                width="180px"/>
                        <column id="resumePosition"
                                property="resumePosition"
                                caption="msg://msgPosition"
                                width="150px"/>
                        <column id="toVacancy"
                                property="toVacancy"
                                width="270px"/>
                        <column id="cityOfResidence"
                                property="candidate.cityOfResidence"
                                width="120px"/>
                        <column id="blackRectangle"
                                width="80px"
                                caption="msg://msgPercentOfRelevance">
                            <componentRenderer/>
                        </column>
                        <column id="lastIteraction"
                                width="80px"
                                caption="msg://msgLastIteraction">
                            <htmlRenderer nullRepresentation="null"/>
                        </column>
                    </columns>
                    <rowsCount autoLoad="true"/>
                </dataGrid>
                <richTextArea id="candidateCVRichTextArea"
                              box.expandRatio="1"
                              width="100%"
                              editable="false"
                              height="100%"/>
            </vbox>
            <hbox spacing="true"
                  width="100%">
                <checkBox id="useLocationCheckBox"
                          align="MIDDLE_LEFT"
                          caption="msg://msgUseLocation"/>
                <button id="closeButton"
                        align="MIDDLE_RIGHT"
                        caption="msg://msgClose"
                        invoke="closeButton"/>
            </hbox>
        </vbox>
        <hbox id="lookupActions"
              spacing="true"
              visible="false"
              align="TOP_RIGHT">
        </hbox>
    </layout>
</window>